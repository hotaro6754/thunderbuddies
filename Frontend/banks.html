<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afinity Finance - AI Banking Assistant</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: white;
            --bg-secondary: #f8fafc;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --card-bg: white;
            --header-bg: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            --tab-bg: #f8fafc;
            --tab-active: white;
        }
        
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border-color: #334155;
            --card-bg: #1e293b;
            --header-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --tab-bg: #1e293b;
            --tab-active: #0f172a;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .header {
            background: var(--header-bg);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .tabs {
            display: flex;
            background: var(--tab-bg);
            border-bottom: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .tab {
            padding: 15px 30px;
            border: none;
            background: none;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #3b82f6;
            border-bottom: 3px solid #3b82f6;
            background: var(--tab-active);
        }
        
        .content {
            padding: 30px;
            min-height: 500px;
            background: var(--bg-primary);
            transition: all 0.3s ease;
        }
        
        .validation-result {
            background: #d1fae5;
            border: 1px solid #10b981;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .validation-error {
            background: #fef2f2;
            border: 1px solid #ef4444;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            color: #dc2626;
        }
        
        .validation-result h3 {
            color: #065f46;
            margin-bottom: 10px;
        }
        
        .validation-error h3 {
            color: #dc2626;
            margin-bottom: 10px;
        }
        
        .accounts-grid {
            display: grid;
            gap: 20px;
        }
        
        .account-card {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            background: var(--card-bg);
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .transaction-amount.credit { color: #10b981; font-weight: bold; }
        .transaction-amount.debit { color: #ef4444; font-weight: bold; }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .analysis-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }
        
        .analysis-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        
        .ai-insights {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        [data-theme="dark"] .ai-insights {
            background: #451a03;
            border-color: #d97706;
            color: #f59e0b;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--card-bg);
            color: var(--text-primary);
            transition: all 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .manual-connect-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .manual-connect-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        
        .manual-connect-btn:disabled {
            background: #94a3b8;
            cursor: not-allowed;
            transform: none;
        }
        
        .bank-selection {
            margin-bottom: 30px;
        }
        
        .bank-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .bank-option {
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--card-bg);
        }
        
        .bank-option:hover {
            border-color: #3b82f6;
        }
        
        .bank-option.selected {
            border-color: #3b82f6;
            background: #dbeafe;
        }
        
        [data-theme="dark"] .bank-option.selected {
            background: #1e3a8a;
        }
        
        .credentials-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid var(--border-color);
            position: relative;
        }
        
        .credentials-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .credentials-header h3 {
            color: var(--text-primary);
            margin: 0;
        }
        
        .toggle-credentials-btn {
            background: #6b7280;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .toggle-credentials-btn:hover {
            background: #4b5563;
        }
        
        .credentials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .credential-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .credential-bank-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .credential-bank-name {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .credential-details {
            text-align: left;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .credential-details p {
            margin-bottom: 5px;
        }
        
        .hidden-content {
            opacity: 0.3;
            filter: blur(5px);
            user-select: none;
            pointer-events: none;
        }
        
        .hidden-message {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Valid banks with specific credentials
        const VALID_BANKS = [
            { 
                id: "HDFC", 
                name: "HDFC Bank", 
                logo: "🏦", 
                validIFSC: "HDFC0001234",
                validAccountNumbers: ["50100215378964", "50100215379012", "50100215379123"],
                description: "Use any of the valid account numbers with this IFSC"
            },
            { 
                id: "SBI", 
                name: "State Bank of India", 
                logo: "🇮🇳", 
                validIFSC: "SBIN0001234",
                validAccountNumbers: ["300689123456", "300689123467", "300689123478"],
                description: "Use any of the valid account numbers with this IFSC"
            },
            { 
                id: "ICICI", 
                name: "ICICI Bank", 
                logo: "💳", 
                validIFSC: "ICIC0001234",
                validAccountNumbers: ["004405123456", "004405123467", "004405123478"],
                description: "Use any of the valid account numbers with this IFSC"
            }
        ];

        // Backend Simulation
        class AfinityBackend {
            static async validateIFSC(ifscCode) {
                try {
                    // Check if it's one of our valid IFSC codes
                    const validBank = VALID_BANKS.find(bank => bank.validIFSC === ifscCode);
                    if (!validBank) {
                        return { 
                            success: false, 
                            error: 'Invalid IFSC code. Please use one of the valid IFSC codes provided below.' 
                        };
                    }

                    // Using Razorpay's public IFSC API for real validation
                    const response = await axios.get(`https://ifsc.razorpay.com/${ifscCode}`);
                    return {
                        success: true,
                        bank: response.data.BANK,
                        branch: response.data.BRANCH,
                        address: response.data.ADDRESS,
                        city: response.data.CITY,
                        state: response.data.STATE,
                        ifsc: response.data.IFSC
                    };
                } catch (error) {
                    return { 
                        success: false, 
                        error: 'Invalid IFSC code. Please use one of the valid IFSC codes provided below.' 
                    };
                }
            }

            static async connectBank(bankId, bankName, ifscCode, accountNumber) {
                // Validate account number format
                if (!accountNumber || accountNumber.length < 8) {
                    return {
                        success: false,
                        error: 'Invalid account number. Must be at least 8 digits.'
                    };
                }

                // Validate IFSC format
                if (!ifscCode || ifscCode.length !== 11) {
                    return {
                        success: false,
                        error: 'Invalid IFSC code. Must be exactly 11 characters.'
                    };
                }

                // Check if IFSC is valid
                const validBank = VALID_BANKS.find(bank => bank.validIFSC === ifscCode);
                if (!validBank) {
                    return {
                        success: false,
                        error: 'Invalid IFSC code. Please use one of the valid IFSC codes provided below.'
                    };
                }

                // Check if account number is valid for this bank
                if (!validBank.validAccountNumbers.includes(accountNumber)) {
                    return {
                        success: false,
                        error: `Invalid account number for ${validBank.name}. Please use one of the valid account numbers provided below.`
                    };
                }

                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Validate IFSC first
                const validation = await this.validateIFSC(ifscCode);
                if (!validation.success) {
                    return validation;
                }

                // Create demo account
                const account = {
                    id: Date.now(),
                    bankId,
                    bankName,
                    accountNumber: accountNumber,
                    ifscCode,
                    balance: (Math.random() * 100000).toFixed(2),
                    accountType: 'SAVINGS',
                    connectedAt: new Date().toLocaleDateString()
                };

                // Demo transactions
                const transactions = [
                    {
                        id: 1,
                        accountId: account.id,
                        amount: -450.00,
                        description: "SWIGGY BANGALORE IN",
                        category: "FOOD_DELIVERY",
                        date: "2024-01-15",
                        type: "DEBIT"
                    },
                    {
                        id: 2,
                        accountId: account.id,
                        amount: 75000.00,
                        description: "SALARY CREDIT",
                        category: "SALARY",
                        date: "2024-01-01",
                        type: "CREDIT"
                    },
                    {
                        id: 3,
                        accountId: account.id,
                        amount: -1200.00,
                        description: "UBER TRIP MUMBAI",
                        category: "TRANSPORT",
                        date: "2024-01-14",
                        type: "DEBIT"
                    },
                    {
                        id: 4,
                        accountId: account.id,
                        amount: -2500.00,
                        description: "BIGBASKET GROCERIES",
                        category: "GROCERIES",
                        date: "2024-01-12",
                        type: "DEBIT"
                    },
                    {
                        id: 5,
                        accountId: account.id,
                        amount: -899.00,
                        description: "AMAZON PRIME SUB",
                        category: "ENTERTAINMENT",
                        date: "2024-01-10",
                        type: "DEBIT"
                    }
                ];

                return {
                    success: true,
                    account,
                    transactions,
                    bankData: validation
                };
            }
        }

        // Main React Component
        function AfinityFinance() {
            const [activeTab, setActiveTab] = useState('connect');
            const [connectedAccounts, setConnectedAccounts] = useState([]);
            const [allTransactions, setAllTransactions] = useState([]);
            const [validationResult, setValidationResult] = useState(null);
            const [loading, setLoading] = useState(false);
            const [darkTheme, setDarkTheme] = useState(false);
            const [selectedBank, setSelectedBank] = useState(null);
            const [accountNumber, setAccountNumber] = useState('');
            const [ifscCode, setIfscCode] = useState('');
            const [error, setError] = useState('');
            const [showCredentials, setShowCredentials] = useState(true);

            // Apply theme to body
            useEffect(() => {
                document.body.setAttribute('data-theme', darkTheme ? 'dark' : 'light');
            }, [darkTheme]);

            const toggleTheme = () => {
                setDarkTheme(!darkTheme);
            };

            const toggleCredentials = () => {
                setShowCredentials(!showCredentials);
            };

            const validateInputs = () => {
                if (!selectedBank) {
                    setError('Please select a bank');
                    return false;
                }
                if (!accountNumber || accountNumber.length < 8) {
                    setError('Please enter a valid account number (min 8 digits)');
                    return false;
                }
                if (!ifscCode || ifscCode.length !== 11) {
                    setError('Please enter a valid IFSC code (11 characters)');
                    return false;
                }
                setError('');
                return true;
            };

            const connectBank = async () => {
                if (!validateInputs()) return;

                setLoading(true);
                try {
                    const result = await AfinityBackend.connectBank(
                        selectedBank.id, 
                        selectedBank.name, 
                        ifscCode, 
                        accountNumber
                    );
                    
                    if (result.success) {
                        setConnectedAccounts(prev => [...prev, result.account]);
                        setAllTransactions(prev => [...prev, ...result.transactions]);
                        setValidationResult(result.bankData);
                        setError('');
                        // Reset form
                        setAccountNumber('');
                        setIfscCode('');
                        setSelectedBank(null);
                    } else {
                        setError(result.error);
                        setValidationResult(null);
                    }
                } catch (error) {
                    setError('Connection failed. Please try again.');
                    setValidationResult(null);
                } finally {
                    setLoading(false);
                }
            };

            const analyzeSpending = () => {
                if (allTransactions.length === 0) return null;
                
                const spending = allTransactions.filter(t => t.amount < 0);
                const totalSpent = spending.reduce((sum, t) => sum + Math.abs(t.amount), 0);
                
                const categories = {};
                spending.forEach(t => {
                    categories[t.category] = (categories[t.category] || 0) + Math.abs(t.amount);
                });
                
                const topCategory = Object.keys(categories).reduce((a, b) => 
                    categories[a] > categories[b] ? a : b
                );

                return {
                    totalSpent: totalSpent.toFixed(2),
                    topCategory,
                    transactionCount: allTransactions.length,
                    averageSpend: (totalSpent / spending.length).toFixed(2),
                    savings: (75000 + totalSpent).toFixed(2)
                };
            };

            const analysis = analyzeSpending();

            return (
                <div className="app-container">
                    {/* Header */}
                    <div className="header">
                        <button className="theme-toggle" onClick={toggleTheme}>
                            {darkTheme ? '☀️' : '🌙'}
                        </button>
                        <h1>💫 Afinity Finance</h1>
                        <p>AI-Powered Banking Assistant • Live Demo</p>
                    </div>

                    {/* Tabs */}
                    <div className="tabs">
                        <button 
                            className={`tab ${activeTab === 'connect' ? 'active' : ''}`}
                            onClick={() => setActiveTab('connect')}
                        >
                            🔗 Connect Banks
                        </button>
                        <button 
                            className={`tab ${activeTab === 'accounts' ? 'active' : ''}`}
                            onClick={() => setActiveTab('accounts')}
                        >
                            💰 Accounts ({connectedAccounts.length})
                        </button>
                        <button 
                            className={`tab ${activeTab === 'analysis' ? 'active' : ''}`}
                            onClick={() => setActiveTab('analysis')}
                        >
                            🤖 AI Analysis
                        </button>
                    </div>

                    {/* Content */}
                    <div className="content">
                        {/* Connect Banks Tab */}
                        {activeTab === 'connect' && (
                            <div>
                                <h2 style={{marginBottom: '20px', fontSize: '1.5rem'}}>
                                    Connect Your Bank Account
                                </h2>
                                <p style={{color: 'var(--text-secondary)', marginBottom: '20px'}}>
                                    Enter your bank details below. Only specific IFSC codes and account numbers will work for this demo.
                                </p>
                                
                                {/* Manual Bank Connection */}
                                <div>
                                    <div className="bank-selection">
                                        <label className="input-label">Select Your Bank</label>
                                        <div className="bank-options">
                                            {VALID_BANKS.map(bank => (
                                                <div 
                                                    key={bank.id}
                                                    className={`bank-option ${selectedBank?.id === bank.id ? 'selected' : ''}`}
                                                    onClick={() => {
                                                        setSelectedBank(bank);
                                                        setIfscCode(bank.validIFSC);
                                                    }}
                                                >
                                                    <div style={{fontSize: '1.5rem', marginBottom: '5px'}}>{bank.logo}</div>
                                                    <div style={{fontSize: '0.9rem'}}>{bank.name}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="input-group">
                                        <label className="input-label">Account Number</label>
                                        <input
                                            type="text"
                                            className="input-field"
                                            placeholder="Enter your account number"
                                            value={accountNumber}
                                            onChange={(e) => setAccountNumber(e.target.value.replace(/\D/g, ''))}
                                            maxLength="18"
                                        />
                                    </div>

                                    <div className="input-group">
                                        <label className="input-label">IFSC Code</label>
                                        <input
                                            type="text"
                                            className="input-field"
                                            placeholder="Enter IFSC code"
                                            value={ifscCode}
                                            onChange={(e) => setIfscCode(e.target.value.toUpperCase())}
                                            maxLength="11"
                                        />
                                    </div>

                                    <button 
                                        className="manual-connect-btn"
                                        onClick={connectBank}
                                        disabled={loading || !selectedBank || !accountNumber || !ifscCode}
                                    >
                                        {loading ? 'Connecting to Bank...' : '🔒 Connect Bank Account'}
                                    </button>

                                    {error && (
                                        <div className="validation-error">
                                            <h3>❌ Connection Failed</h3>
                                            <p>{error}</p>
                                        </div>
                                    )}

                                    {validationResult && (
                                        <div className="validation-result">
                                            <h3>✅ Bank Account Connected Successfully!</h3>
                                            <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px'}}>
                                                <p><strong>Bank:</strong> {validationResult.bank}</p>
                                                <p><strong>Branch:</strong> {validationResult.branch}</p>
                                                <p><strong>City:</strong> {validationResult.city}</p>
                                                <p><strong>IFSC:</strong> {validationResult.ifsc}</p>
                                                <p><strong>Account:</strong> {connectedAccounts[connectedAccounts.length - 1]?.accountNumber}</p>
                                                <p><strong>Balance:</strong> ₹{connectedAccounts[connectedAccounts.length - 1]?.balance}</p>
                                            </div>
                                        </div>
                                    )}

                                    {/* Valid Credentials Section */}
                                    <div className="credentials-section">
                                        <div className="credentials-header">
                                            <h3>🔐 Valid Demo Credentials</h3>
                                            <button 
                                                className="toggle-credentials-btn"
                                                onClick={toggleCredentials}
                                            >
                                                {showCredentials ? 'Hide Credentials' : 'Show Credentials'}
                                            </button>
                                        </div>
                                        
                                        {showCredentials ? (
                                            <>
                                                <p style={{color: 'var(--text-secondary)', marginBottom: '15px'}}>
                                                    Use these specific IFSC codes and account numbers to test the application:
                                                </p>
                                                <div className="credentials-grid">
                                                    {VALID_BANKS.map(bank => (
                                                        <div key={bank.id} className="credential-card">
                                                            <div className="credential-bank-logo">{bank.logo}</div>
                                                            <div className="credential-bank-name">{bank.name}</div>
                                                            <div className="credential-details">
                                                                <p><strong>IFSC Code:</strong> {bank.validIFSC}</p>
                                                                <p><strong>Valid Account Numbers:</strong></p>
                                                                {bank.validAccountNumbers.map((acc, index) => (
                                                                    <p key={index} style={{fontFamily: 'monospace', fontSize: '0.8rem'}}>
                                                                        • {acc}
                                                                    </p>
                                                                ))}
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                                <p style={{color: 'var(--text-secondary)', marginTop: '15px', fontSize: '0.9rem'}}>
                                                    <strong>Note:</strong> Only these specific IFSC codes and account numbers will work. 
                                                    Any other combination will show "Invalid IFSC code" or "Invalid account number" error.
                                                </p>
                                            </>
                                        ) : (
                                            <div className="hidden-message">
                                                <p>🔒 Credentials are hidden</p>
                                                <p style={{fontSize: '0.9rem', marginTop: '10px'}}>
                                                    Click "Show Credentials" to reveal the demo bank details
                                                </p>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Accounts Tab */}
                        {activeTab === 'accounts' && (
                            <div>
                                <h2 style={{marginBottom: '20px', fontSize: '1.5rem'}}>
                                    Your Bank Accounts
                                </h2>
                                
                                {connectedAccounts.length === 0 ? (
                                    <p style={{color: 'var(--text-secondary)', textAlign: 'center', padding: '40px'}}>
                                        No accounts connected yet. Go to "Connect Banks" to get started.
                                    </p>
                                ) : (
                                    <div className="accounts-grid">
                                        {connectedAccounts.map(account => (
                                            <div key={account.id} className="account-card">
                                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'start'}}>
                                                    <div>
                                                        <h3 style={{fontSize: '1.2rem', marginBottom: '10px'}}>
                                                            {account.bankName}
                                                        </h3>
                                                        <p style={{color: 'var(--text-secondary)', fontSize: '0.9rem'}}>
                                                            Account: {account.accountNumber}
                                                        </p>
                                                        <p style={{color: 'var(--text-secondary)', fontSize: '0.9rem'}}>
                                                            IFSC: {account.ifscCode}
                                                        </p>
                                                        <p style={{color: 'var(--text-secondary)', fontSize: '0.9rem'}}>
                                                            Connected: {account.connectedAt}
                                                        </p>
                                                    </div>
                                                    <div style={{textAlign: 'right'}}>
                                                        <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#10b981'}}>
                                                            ₹{parseFloat(account.balance).toLocaleString()}
                                                        </div>
                                                        <div style={{color: 'var(--text-secondary)', fontSize: '0.8rem'}}>
                                                            {account.accountType}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {/* Transactions */}
                                {allTransactions.length > 0 && (
                                    <div style={{marginTop: '30px'}}>
                                        <h3 style={{marginBottom: '15px', fontSize: '1.2rem'}}>
                                            Recent Transactions
                                        </h3>
                                        <div>
                                            {allTransactions.map(txn => (
                                                <div key={txn.id} className="transaction-item">
                                                    <div style={{flex: 1}}>
                                                        <div style={{fontWeight: 'bold'}}>{txn.description}</div>
                                                        <div style={{color: 'var(--text-secondary)', fontSize: '0.9rem'}}>
                                                            {txn.category} • {txn.date}
                                                        </div>
                                                    </div>
                                                    <div className={`transaction-amount ${txn.amount > 0 ? 'credit' : 'debit'}`}>
                                                        {txn.amount > 0 ? '+' : '-'}₹{Math.abs(txn.amount).toLocaleString()}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* AI Analysis Tab */}
                        {activeTab === 'analysis' && (
                            <div>
                                <h2 style={{marginBottom: '20px', fontSize: '1.5rem'}}>
                                    🤖 AI Spending Analysis
                                </h2>
                                
                                {!analysis ? (
                                    <p style={{color: 'var(--text-secondary)', textAlign: 'center', padding: '40px'}}>
                                        Connect banks to see AI-powered insights.
                                    </p>
                                ) : (
                                    <>
                                        <div className="analysis-grid">
                                            <div className="analysis-card">
                                                <div className="analysis-value">₹{analysis.totalSpent}</div>
                                                <div>Total Spent</div>
                                            </div>
                                            <div className="analysis-card">
                                                <div className="analysis-value">{analysis.transactionCount}</div>
                                                <div>Transactions</div>
                                            </div>
                                            <div className="analysis-card">
                                                <div className="analysis-value">{analysis.topCategory}</div>
                                                <div>Top Category</div>
                                            </div>
                                            <div className="analysis-card">
                                                <div className="analysis-value">₹{analysis.averageSpend}</div>
                                                <div>Avg. Spend</div>
                                            </div>
                                        </div>

                                        <div className="ai-insights">
                                            <h3 style={{marginBottom: '10px'}}>💡 AI Insights:</h3>
                                            <p>
                                                Your highest spending is in <strong>{analysis.topCategory}</strong>. 
                                                Consider setting a monthly budget of ₹{(analysis.totalSpent * 0.8).toFixed(0)} 
                                                for this category to save 20% more money.
                                            </p>
                                            <p style={{marginTop: '10px'}}>
                                                💰 <strong>Monthly Savings Potential:</strong> ₹{(analysis.totalSpent * 0.2).toFixed(0)}
                                            </p>
                                        </div>
                                    </>
                                )}
                            </div>
                        )}
                    </div>

                    {/* Loading Overlay */}
                    {loading && (
                        <div className="loading">
                            <div style={{background: 'var(--card-bg)', padding: '30px', borderRadius: '12px', textAlign: 'center'}}>
                                <div className="spinner"></div>
                                <p style={{marginTop: '15px', color: 'var(--text-primary)'}}>Connecting to bank...</p>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <div style={{background: 'var(--tab-bg)', padding: '20px', textAlign: 'center', color: 'var(--text-secondary)', fontSize: '0.9rem'}}>
                        <p>🚀 <strong>Live Demo</strong> • Real IFSC Validation • AI-Powered Insights</p>
                        <p>Built for Hackathon • Only specific credentials work for this demo</p>
                    </div>
                </div>
            );
        }

        // Render the app
        ReactDOM.render(<AfinityFinance />, document.getElementById('root'));
    </script>
</body>
</html>